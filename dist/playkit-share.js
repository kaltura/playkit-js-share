var KalturaPlayer="object"==typeof KalturaPlayer?KalturaPlayer:{};KalturaPlayer.plugins=KalturaPlayer.plugins||{},KalturaPlayer.plugins.share=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t){e.exports=KalturaPlayer},function(e,t,r){"use strict";r.r(t),r.d(t,"Plugin",(function(){return Me})),r.d(t,"VERSION",(function(){return Ee})),r.d(t,"NAME",(function(){return De}));var n,o=r(0);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=o.ui.preact,d=o.ui.preacti18n,m=o.ui.Components,b=o.ui.style,v=o.ui.Event,g=o.ui.Utils,S=o.ui.redux,w=o.ui.Reducers,C=y.h,k=y.Component,O=d.Text,_=d.Localizer,P=m.Overlay,T=m.Icon,j=m.IconType,F=m.CopyButton,U=m.Button,x=v.withLogger,R=v.withKeyboardA11y,A=g.bindActions,I=g.KeyMap,N=w.shell.actions,M=S.connect,E=g.toHHMMSS,D=g.toSecondsFromHHMMSS,B="main",V="embed-options",K=function(e){return C(_,null,C(U,{ref:function(t){e.addAccessibleChild(t)},title:C(O,{id:e.config.title}),role:"link","aria-label":C(O,{id:e.config.ariaLabel}),className:[b.btnRounded,b[e.config.iconType],e.config.iconType].join(" "),onClick:function(){var t=e.config.shareUrl,r=e.config.templateUrl,n=t;if(r)try{n=r.replace("{shareUrl}",encodeURIComponent(t))}catch(e){n=r.replace("{shareUrl}",t)}window.open(n,"_blank","width=580,height=580")}},C(T,{style:"svg"===e.config.iconType?"background-image: url(".concat(e.config.svg,")"):"",type:e.config.iconType})))},L=function(e){var t;return C("div",{className:e.copy?b.copyUrlRow:""},C("div",{className:[b.formGroup,b.hasIcon,b.inputCopyUrl].join(" "),style:"width: 350px;"},C("input",{tabIndex:"-1",type:"text",ref:function(e){return e?t=e:void 0},className:b.formControl,value:e.shareUrl,readOnly:!0}),C(T,{type:j.Link})),e.copy&&C(F,{addAccessibleChild:e.addAccessibleChild,copy:function(){t&&(e.isIos?t.setSelectionRange(0,9999):t.select(),document.execCommand("copy"),t.blur())}}))},z=function(e){return C("div",{className:b.videoStartOptionsRow},C("div",{role:"checkbox","aria-checked":e.startFrom?"true":"false",ref:function(t){e.addAccessibleChild(t)},tabIndex:"0",onClick:function(t){t.preventDefault(),e.toggleStartFrom()},onKeyDown:function(t){t.keyCode===I.ENTER&&(t.preventDefault(),e.toggleStartFrom())},className:[b.checkbox,b.dInlineBlock].join(" ")},C("input",{type:"checkbox",id:"start-from",checked:e.startFrom}),C("label",{id:"start-from-label",htmlFor:"start-from"},C(O,{id:"share.start_video_at"}))),C("div",{className:[b.formGroup,b.dInlineBlock].join(" ")},C("input",{"aria-labelledby":"start-from-label",ref:function(t){e.addAccessibleChild(t)},type:"text",className:b.formControl,onChange:e.handleStartFromChange,value:E(e.startFromValue),style:"width: 72px;"})))},H=M(null,A(N))(n=x("ShareOverlay")(n=R(n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,e);var t,r,n,o=s(a);function a(){var e;i(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(f(e=o.call.apply(o,[this].concat(r))),"onClick",(function(){e._transitionToState(V)})),h(f(e),"_toggleStartFrom",(function(){e.setState((function(e){return{startFrom:!e.startFrom}}))})),h(f(e),"_handleStartFromChange",(function(t){var r=D(t.target.value);r>=e.props.player.duration&&e.setState({startFromValue:1}),e.setState({startFromValue:r})})),e}return t=a,(r=[{key:"componentWillMount",value:function(){this.isIos="iOS"===this.props.player.env.os.name,this.setState({view:B,startFrom:!1,startFromValue:Math.floor(this.props.player.currentTime)})}},{key:"componentDidUpdate",value:function(e,t){t.view!=this.state.view&&this.props.focusOnDefault()}},{key:"componentDidMount",value:function(){this.props.setIsModal(!0)}},{key:"_transitionToState",value:function(e){this.setState({view:e})}},{key:"getShareUrl",value:function(){var e=this.props.shareUrl;return this.state.startFrom&&(e+="?start=".concat(this.state.startFromValue)),e}},{key:"getEmbedCode",value:function(){var e=this.props.embedUrl;return this.state.startFrom&&(e+="?start=".concat(this.state.startFromValue)),'<iframe src="'.concat(e,'" style="width: 560px;height: 395px" allowfullscreen webkitallowfullscreen mozAllowFullScreen frameborder="0" allow="accelerometer *; autoplay *; encrypted-media *; gyroscope *; picture-in-picture *"/>')}},{key:"_getEmailTemplate",value:function(){var e="this video",t=this.props.player;t.config.sources&&t.config.sources.metadata&&t.config.sources.metadata.name&&(e=t.config.sources.metadata.name);var r=encodeURIComponent("Check out ".concat(e)),n=encodeURIComponent("Check out ".concat(e,": ").concat(this.getShareUrl()));return"mailto:?subject=".concat(r,"&body=").concat(n)}},{key:"_createSocialNetworks",value:function(e){var t=this;return e.map((function(e){return"default"===e.iconType&&(e.iconType=e.name,e.shareUrl=t.props.shareUrl),C(K,{key:e.name,config:e,addAccessibleChild:t.props.addAccessibleChild})}))}},{key:"renderMainState",value:function(){var e=this;return C("div",{className:this.state.view===B?"overlay-screen active":"overlay-screen"},C("div",{className:b.title},C(O,{id:"share.title"})),C("div",{className:b.shareMainContainer},C("div",{className:b.shareIcons},this._createSocialNetworks(this.props.socialNetworks),C(_,null,C("a",{role:"button",tabIndex:"0",ref:function(t){e.props.addAccessibleChild(t)},className:[b.btnRounded,b.emailShareBtn].join(" "),href:this._getEmailTemplate(),title:C(O,{id:"share.email"})},C(T,{type:j.Email}))),C(_,null,C(U,{"aria-haspopup":"true",ref:function(t){e.props.addAccessibleChild(t)},className:[b.btnRounded,b.embedShareBtn].join(" "),onClick:this.onClick,title:C(O,{id:"share.embed"})},C(T,{type:j.Embed})))),C("div",{className:b.linkOptionsContainer},C(L,{addAccessibleChild:this.props.addAccessibleChild,shareUrl:this.getShareUrl(),copy:!0,isIos:this.isIos}),this.props.enableTimeOffset?C(z,{addAccessibleChild:this.props.addAccessibleChild,startFrom:this.state.startFrom,startFromValue:this.state.startFromValue,handleStartFromChange:this._handleStartFromChange,toggleStartFrom:this._toggleStartFrom}):void 0)))}},{key:"renderOptionsState",value:function(e){return C("div",{className:this.state.view===V?"overlay-screen active":"overlay-screen"},C("div",{className:b.title},e.title),C("div",{className:b.linkOptionsContainer},C(L,{addAccessibleChild:this.props.addAccessibleChild,shareUrl:e.shareUrl,copy:!0,isIos:this.isIos}),this.props.enableTimeOffset?C(z,{addAccessibleChild:this.props.addAccessibleChild,startFrom:this.state.startFrom,startFromValue:this.state.startFromValue,handleStartFromChange:this._handleStartFromChange,toggleStartFrom:this._toggleStartFrom}):void 0))}},{key:"renderStateContent",value:function(){switch(this.props.clearAccessibleChildren(),this.state.view){case V:return this.renderOptionsState({title:C(O,{id:"share.embed_options"}),shareUrl:this.getEmbedCode()});case B:default:return this.renderMainState()}}},{key:"render",value:function(e){return C(P,{addAccessibleChild:this.props.addAccessibleChild,handleKeyDown:this.props.handleKeyDown,onClose:e.onClose,type:"share"},this.renderStateContent())}}])&&l(t.prototype,r),n&&l(t,n),a}(k))||n)||n)||n;H.displayName="ShareOverlay";var G,q=[{name:"facebook",templateUrl:"https://www.facebook.com/sharer/sharer.php?u={shareUrl}",title:"share.share-on-facebook",ariaLabel:"share.share-on-facebook",iconType:"default",svg:""},{name:"linkedin",templateUrl:"https://www.linkedin.com/shareArticle?mini=true&url={shareUrl}",title:"share.share-on-linkedin",ariaLabel:"share.share-on-linkedin",iconType:"default",svg:""},{name:"twitter",templateUrl:"https://twitter.com/share?url={shareUrl}",title:"share.share-on-twitter",ariaLabel:"share.share-on-twitter",iconType:"default",svg:""}];function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ee(e);if(t){var o=ee(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Y(this,r)}}function Y(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var re=o.ui.preact,ne=o.ui.preacti18n,oe=o.ui.Components,ae=o.ui.style,ie=o.ui.Event,le=o.ui.Utils,ce=o.ui.redux,se=o.ui.Reducers,ue=re.h,fe=re.Component,pe="preact/compat".createPortal,he=ne.withText,ye=oe.Tooltip,de=oe.ToolTipType,me=oe.Button,be=oe.ButtonControl,ve=oe.withLogger,ge=oe.Icon,Se=oe.IconState,we=ie.withPlayer,Ce=le.bindActions,ke=se.shell.actions,Oe=ce.connect,_e=Oe((function(e){return{overlayOpen:e.share.overlayOpen,isPlaying:e.engine.isPlaying}}),Ce(ke))(G=we(G=ve("Share")(G=he({shareTxt:"controls.share"})(G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(a,e);var t,r,n,o=X(a);function a(){var e;$(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return te(Z(e=o.call.apply(o,[this].concat(r))),"toggleOverlay",(function(){e.setState((function(t){return{previousIsPlaying:e.props.isPlaying||t.previousIsPlaying}}),(function(){e.state.overlayActive?e.props.player.pause():e.state.previousIsPlaying&&(e.props.player.play(),e.setState({previousIsPlaying:!1}))}))})),e}return t=a,(r=[{key:"_getMergedShareConfig",value:function(){var e=this.props.config.socialNetworks||[];return e.concat(q.filter((function(t){return!e.find((function(e){return e.name===t.name}))})))}},{key:"render",value:function(){var e=this.props.config,t=e.embedUrl,r=e.enable,n=e.shareUrl,o=e.enableTimeOffset;if(r&&n&&t){var a=this._getMergedShareConfig(),i="#".concat(this.props.player.config.targetId," .overlay-portal");return this.state.overlayActive?pe(ue(H,{shareUrl:n,embedUrl:t,enableTimeOffset:o,socialNetworks:a,player:this.props.player,onClose:this.toggleOverlay}),document.querySelector(i)):ue(be,{name:"Share"},ue(ye,{label:this.props.shareTxt,type:this.props.toolTipType?this.props.toolTipType:de.BottomLeft},ue(me,{"aria-haspopup":"true",className:ae.controlButton,onClick:this.toggleOverlay,"aria-label":this.props.shareTxt},ue(ge,{id:Ne,path:'<path fill="#{$color}" d="M318.641 446.219l236.155-142.257c-0.086-1.754-0.129-3.52-0.129-5.295 0-58.91 47.756-106.667 106.667-106.667s106.667 47.756 106.667 106.667c0 58.91-47.756 106.667-106.667 106.667-33.894 0-64.095-15.808-83.633-40.454l-236.467 142.445c-0.132-3.064-0.394-6.095-0.779-9.087l7.271-12.835-0.117 53.333-7.183-12.743c0.399-3.046 0.67-6.131 0.806-9.252l236.467 142.383c19.538-24.648 49.741-40.457 83.636-40.457 58.91 0 106.667 47.756 106.667 106.667s-47.756 106.667-106.667 106.667c-58.91 0-106.667-47.756-106.667-106.667 0-1.775 0.043-3.539 0.129-5.293l-236.19-142.216c-19.528 24.867-49.868 40.841-83.939 40.841-58.91 0-106.667-47.756-106.667-106.667s47.756-106.667 106.667-106.667c34.091 0 64.447 15.993 83.974 40.886zM234.667 554.667c23.564 0 42.667-19.103 42.667-42.667s-19.103-42.667-42.667-42.667c-23.564 0-42.667 19.103-42.667 42.667s19.103 42.667 42.667 42.667zM661.333 341.333c23.564 0 42.667-19.103 42.667-42.667s-19.103-42.667-42.667-42.667c-23.564 0-42.667 19.103-42.667 42.667s19.103 42.667 42.667 42.667zM661.333 768c23.564 0 42.667-19.103 42.667-42.667s-19.103-42.667-42.667-42.667c-23.564 0-42.667 19.103-42.667 42.667s19.103 42.667 42.667 42.667z" />',state:Se.ACTIVE}))))}}}])&&J(t.prototype,r),n&&J(t,n),a}(fe))||G)||G)||G)||G;function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xe(e);if(t){var o=xe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ue(this,r)}}function Ue(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}_e.displayName="Share";var Re,Ae,Ie,Ne="share",Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(a,e);var t,r,n,o=Fe(a);function a(e,t,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e,t,r)}return t=a,n=[{key:"isValid",value:function(){return!0}}],(r=[{key:"getUIComponents",value:function(){return[{label:"shareButtonComponent",presets:["Playback","Live"],container:"TopBarRightControls",get:_e,props:{config:this.config}}]}},{key:"loadMedia",value:function(){}},{key:"reset",value:function(){}},{key:"destroy",value:function(){}}])&&Te(t.prototype,r),n&&Te(t,n),a}(o.BasePlugin);Ie={enable:!1,shareUrl:"",embedUrl:"",enableTimeOffset:!1},(Ae="defaultConfig")in(Re=Me)?Object.defineProperty(Re,Ae,{value:Ie,enumerable:!0,configurable:!0,writable:!0}):Re[Ae]=Ie;var Ee="1.1.2",De="@playkit-js/playkit-broadpeak-smartlib";Object(o.registerPlugin)("share",Me)}]);
//# sourceMappingURL=playkit-share.js.map